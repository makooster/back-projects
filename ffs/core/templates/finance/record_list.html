{% extends "finance/base.html" %}

{% block title %}–°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π{% endblock %}
  <head>
    <style>
      .btn {
          display: inline-block;
          padding: 3px 6px;
          margin-left: 5px;
          font-size: 0.8em;
          text-decoration: none;
          border-radius: 4px;
      }
  
      .btn-outline-primary {
          color: #007bff;
          border: 1px solid #007bff;
      }
  
      .btn-outline-danger {
          color: #dc3545;
          border: 1px solid #dc3545;
      }
  
      .btn:hover {
          background-color: #f0f0f0;
      }

      table {
        border-collapse: collapse;
        width: 100%;
        font-size: 0.95em;
      }

      th, td {
          padding: 8px 12px;
          border: 1px solid #ccc;
      }

      th {
          background-color: #f8f9fa;
          text-align: left;
      }

      tr:nth-child(even) {
          background-color: #f2f2f2;
      }
  </style>
  
  </head>
    {% block content %}
    <h2>–°–ø–∏—Å–æ–∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π</h2>

    <form method="get">
        <label for="type">–¢–∏–ø:</label>
        <select name="type" id="type">
          <option value="">–í—Å–µ</option>
          <option value="REPLENISHMENT" {% if request.GET.type == "REPLENISHMENT" %}selected{% endif %}>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</option>
          <option value="WITHDRAW" {% if request.GET.type == "WITHDRAW" %}selected{% endif %}>–°–Ω—è—Ç–∏–µ</option>
        </select>
    
        <label for="status">–°—Ç–∞—Ç—É—Å:</label>
        <select name="status" id="status">
          <option value="">–í—Å–µ</option>
          {% for value, display in statuses %}
            <option value="{{ value }}" {% if request.GET.status == value %}selected{% endif %}>{{ display }}</option>
          {% endfor %}
        </select>
    
        <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
        <select name="category" id="category">
          <option value="">–í—Å–µ</option>
          {% for cat in categories %}
            <option value="{{ cat.id }}" {% if request.GET.category == cat.id|stringformat:"s" %}selected{% endif %}>
              {{ cat.name }}
            </option>
          {% endfor %}
        </select>
    
        <label for="subcategory">–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
        <select name="subcategory" id="subcategory">
          <option value="">–í—Å–µ</option>
          {% for sub in subcategories %}
            <option value="{{ sub.id }}" {% if request.GET.subcategory == sub.id|stringformat:"s" %}selected{% endif %}>
              {{ sub.name }}
            </option>
          {% endfor %}
        </select>
    
        <label for="start_date">–° –¥–∞—Ç—ã:</label>
        <input type="date" name="start_date" id="start_date" value="{{ request.GET.start_date }}">
    
        <label for="end_date">–ü–æ –¥–∞—Ç—É:</label>
        <input type="date" name="end_date" id="end_date" value="{{ request.GET.end_date }}">
    
        <button type="submit">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
        <a href="{% url 'record-list' %}">–°–±—Ä–æ—Å–∏—Ç—å</a>
    </form>
    

    {% if records %}
    <table border="1" cellspacing="0" cellpadding="6" style="margin-top: 20px; border-collapse: collapse; width: 100%;">
      <thead>
          <tr>
              <th>–¢–∏–ø</th>
              <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
              <th>–°—É–º–º–∞</th>
              <th>–î–∞—Ç–∞</th>
              <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
      </thead>
      <tbody>
          {% for record in records %}
          <tr>
              <td>{{ record.get_type_display }}</td>
              <td>{{ record.subcategory }}</td>
              <td>{{ record.formatted_sum }}</td>
              <td>{{ record.date|date:"d.m.Y" }}</td>
              <td>
                  <a href="{% url 'record-edit' record.id %}" class="btn btn-outline-primary">‚úèÔ∏è</a>
                  <a href="{% url 'record-delete' record.id %}" class="btn btn-outline-danger"
                     onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å?');">üóëÔ∏è</a>
              </td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
  
      
    {% else %}
        <p>–ù–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π</p>
    {% endif %}

    {% endblock %}

